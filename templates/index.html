<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Steganography Tool</title>
<style>
/* === DARK MODE STYLE === */
body { font-family: 'Segoe UI', sans-serif; background: #121212; color: #e0e0e0; padding: 20px; display:flex;justify-content:center;align-items:center;height:100vh; }
.container { max-width:800px;width:100%;background:rgba(30,30,30,0.9);border-radius:16px;padding:30px;box-shadow:0 8px 25px rgba(0,0,0,0.6);}
.header { text-align:center;margin-bottom:20px;}
.header h1 { font-size:2rem; background:linear-gradient(90deg,#00c6ff,#0072ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.mode-selector { display:flex; margin-bottom:20px; }
.mode-btn { flex:1; padding:12px; background:#1f1f1f; border:none; color:#bbb; cursor:pointer; transition:0.3s; }
.mode-btn.active { background:linear-gradient(90deg,#00c6ff,#0072ff); color:white; font-weight:bold;}
.mode-btn:hover:not(.active){background:#292929;}
.section { display:none;}
.section.active { display:block; }
label { display:block;margin-bottom:6px;color:#ddd;font-weight:600;}
.file-input-label { display:block;padding:14px;background:rgba(255,255,255,0.05);border:2px dashed #555;border-radius:10px;text-align:center;cursor:pointer;color:#aaa;transition:0.3s;}
.file-input-label:hover{border-color:#00c6ff;color:#fff;}
textarea{width:100%;padding:14px;background:#1f1f1f;border:2px solid #333;border-radius:10px;color:#e0e0e0;resize:vertical;min-height:100px;}
textarea:focus{border-color:#00c6ff;outline:none;}
.btn{width:100%;padding:14px;background:linear-gradient(90deg,#00c6ff,#0072ff);color:white;border:none;border-radius:10px;cursor:pointer;font-size:1.1rem;transition:0.3s;}
.btn:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(0,198,255,0.4);}
.result{margin-top:15px;padding:12px;border-radius:10px;display:none;}
.result.success{background:rgba(0,255,128,0.1);border:1px solid #00ff80;color:#00ffb0;}
.result.error{background:rgba(255,0,64,0.1);border:1px solid #ff0040;color:#ff5577;}
.download-btn{margin-top:10px;background:linear-gradient(90deg,#ff6a00,#ee0979);}
</style>
</head>
<body>
<div class="container">
<div class="header"><h1>üîí Steganography Tool</h1><p>Hide and extract secret messages</p></div>
<div class="mode-selector">
<button class="mode-btn active" onclick="switchMode('encode')">üìù Encode</button>
<button class="mode-btn" onclick="switchMode('decode')">üîç Decode</button>
</div>
<div id="encode-section" class="section active">
<form id="encode-form" enctype="multipart/form-data">
<label>Choose Image:</label>
<input type="file" id="encode-image" accept="image/*" required hidden>
<label for="encode-image" class="file-input-label">üìÅ Click to select image</label>
<label>Secret Message:</label>
<textarea id="encode-message" placeholder="Enter secret message..."></textarea>
<button type="submit" class="btn">üîê Encode</button>
</form>
<div id="encode-result" class="result"></div>
</div>
<div id="decode-section" class="section">
<form id="decode-form" enctype="multipart/form-data">
<label>Choose Encoded Image:</label>
<input type="file" id="decode-image" accept="image/*" required hidden>
<label for="decode-image" class="file-input-label">üìÅ Click to select encoded image</label>
<button type="submit" class="btn">üîç Decode</button>
</form>
<div id="decode-result" class="result"></div>
</div>
</div>
<script>
function switchMode(mode){document.querySelectorAll('.mode-btn').forEach(b=>b.classList.remove('active'));event.target.classList.add('active');document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));document.getElementById(mode+'-section').classList.add('active');}
document.getElementById('encode-form').addEventListener('submit',async e=>{
e.preventDefault();const f=new FormData();f.append('image',document.getElementById('encode-image').files[0]);f.append('message',document.getElementById('encode-message').value);
const r=await fetch('/encode',{method:'POST',body:f});const d=await r.json();const res=document.getElementById('encode-result');res.style.display='block';res.className='result '+(d.success?'success':'error');res.innerHTML=d.message;if(d.success){const b=document.createElement('button');b.className='btn download-btn';b.innerHTML='üíæ Download';b.onclick=()=>downloadImage(d.image_data,'encoded.png');res.appendChild(b);}});
document.getElementById('decode-form').addEventListener('submit',async e=>{
e.preventDefault();const f=new FormData();f.append('image',document.getElementById('decode-image').files[0]);const r=await fetch('/decode',{method:'POST',body:f});const d=await r.json();const res=document.getElementById('decode-result');res.style.display='block';res.className='result '+(d.success?'success':'error');res.innerHTML=d.success?'Decoded: '+d.decoded_message:d.message;});
function downloadImage(data,name){const a=document.createElement('a');a.href='data:image/png;base64,'+data;a.download=name;a.click();}
</script>
</body>
</html>